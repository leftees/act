<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Testing | Act</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../../docs/elm/index.html" />
    
    
    <link rel="prev" href="../../docs/react/subscriptions.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="3.9"
        data-chapter-title="Testing"
        data-filepath="docs/react/testing.md"
        data-basepath="../.."
        data-revision="Sun May 22 2016 14:02:26 GMT+0300 (IDT)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        act
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="docs/concepts/index.html">
            
                
                    <a href="../../docs/concepts/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Concepts
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="docs/concepts/json.html">
            
                
                    <a href="../../docs/concepts/json.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Using JSON for rendering
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="docs/concepts/unidirectional-data-flow.html">
            
                
                    <a href="../../docs/concepts/unidirectional-data-flow.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Unidirectional data flow
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="docs/concepts/single-model-and-reducer.html">
            
                
                    <a href="../../docs/concepts/single-model-and-reducer.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Single model &amp; reducer
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="docs/concepts/reducers.html">
            
                
                    <a href="../../docs/concepts/reducers.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        Reducers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="docs/concepts/signals.html">
            
                
                    <a href="../../docs/concepts/signals.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                        Signals: sources &amp; processes
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="docs/concepts/subscriptions.html">
            
                
                    <a href="../../docs/concepts/subscriptions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.</b>
                        
                        Subscriptions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="docs/concepts/storage.html">
            
                
                    <a href="../../docs/concepts/storage.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        Storage
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="docs/concepts/memoization.html">
            
                
                    <a href="../../docs/concepts/memoization.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.8.</b>
                        
                        Memoization
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="docs/api.html">
            
                
                    <a href="../../docs/api.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        API
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="docs/react/index.html">
            
                
                    <a href="../../docs/react/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        For React developers
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="docs/react/jsx-vs-json.html">
            
                
                    <a href="../../docs/react/jsx-vs-json.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        JSX vs JSON
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="docs/react/shortcuts.html">
            
                
                    <a href="../../docs/react/shortcuts.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Class and id shortcuts
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="docs/react/attributes.html">
            
                
                    <a href="../../docs/react/attributes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        JS vs HTML attribute names
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="docs/react/classes.html">
            
                
                    <a href="../../docs/react/classes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        class-names vs class-lists
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="docs/react/lifecycle.html">
            
                
                    <a href="../../docs/react/lifecycle.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Lifecycle events
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="docs/react/should-update-vs-memoization.html">
            
                
                    <a href="../../docs/react/should-update-vs-memoization.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        shouldComponentUpdate vs memoization
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="docs/react/events.html">
            
                
                    <a href="../../docs/react/events.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.7.</b>
                        
                        Events
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="docs/react/subscriptions.html">
            
                
                    <a href="../../docs/react/subscriptions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.8.</b>
                        
                        Subscriptions
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="3.9" data-path="docs/react/testing.html">
            
                
                    <a href="../../docs/react/testing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.9.</b>
                        
                        Testing
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="docs/elm/index.html">
            
                
                    <a href="../../docs/elm/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        For Elm developers
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="docs/elm/update-vs-reducer.html">
            
                
                    <a href="../../docs/elm/update-vs-reducer.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        update vs reducer
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="docs/elm/html-helpers-vs-json.html">
            
                
                    <a href="../../docs/elm/html-helpers-vs-json.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Html helpers vs JSON
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="docs/elm/actions.html">
            
                
                    <a href="../../docs/elm/actions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Actions
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="docs/todo.html">
            
                
                    <a href="../../docs/todo.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Wanna help?
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >Act</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="testing">Testing</h1>
<h5 id="react">React</h5>
<p>In React there are mainly two approaches for testing components: shallow and
deep rendering.</p>
<p>  1) Shallow rendering means you&apos;ll render your component without the need of a
  DOM , but you can&apos;t render deeply nested components, and you&apos;ll test events
  by using mock helpers. Here&apos;s how verbose this is:</p>
<pre><code class="lang-js">  <span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react/addons&apos;</span>
  <span class="hljs-keyword">import</span> TestUtils <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react-addons-test-utils&apos;</span>
  <span class="hljs-keyword">import</span> Component <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./path/to/Component&apos;</span>

  const renderer = TestUtils.createRenderer()
  renderer.render(&lt;Component className=<span class="hljs-string">&apos;MyComponent&apos;</span>&gt;&lt;/Component&gt;)

  const component = renderer.getRenderOutput();

  <span class="hljs-comment">// now you&apos;re ready to test</span>
  assert.equal(component.type, <span class="hljs-string">&apos;div&apos;</span>);
</code></pre>
<p>  There are a couple of libraries to simplify and reduce this boilerplate, like
  <a href="https://github.com/glenjamin/skin-deep" target="_blank">skin-deep</a> and <a href="https://github.com/airbnb/enzyme" target="_blank">enzyme</a>.</p>
<p>  2) Deep rendering means rendering to a DOM, and that makes your tests not
  really unit tests, but something between unit and integration tests. This
  approach requires more setup and may be slower, but has the great advantage
  of testing &quot;the real thing&quot;, and you can run it in real devices using
  something like <a href="https://karma-runner.github.io/" target="_blank">karma</a>.</p>
<p>  If you run your tests that way, you&apos;ll probably also use <a href="https://facebook.github.io/jest/docs/tutorial-react.html" target="_blank">Jest</a>
  a testing framework built by Facebook on top of <a href="http://jasmine.github.io/" target="_blank">Jasmine</a>.
  The main advantage of Jest is the &quot;auto mock&quot; functionality, that truly
  isolates your module for testing. (If you&apos;re confused by the term &quot;mock&quot;
  here, don&apos;t worry, it is used for many different things in the Node world. In
  this case, a mock means being able to override parts of modules, or entire
  modules, like in libraries as <a href="https://github.com/jhnns/rewire" target="_blank">rewire</a>)</p>
<p>  Here&apos;s an example (from Jest docs):</p>
<pre><code class="lang-js">  jest.unmock(<span class="hljs-string">&apos;./path/to/CheckboxWithLabel&apos;</span>);

  <span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>
  <span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react-dom&apos;</span>
  <span class="hljs-keyword">import</span> TestUtils <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react-addons-test-utils&apos;</span>
  <span class="hljs-keyword">import</span> CheckboxWithLabel <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./path/to/CheckboxWithLabel&apos;</span>

  describe(<span class="hljs-string">&apos;Component&apos;</span>, () =&gt; {

    it(<span class="hljs-string">&apos;changes the text after click&apos;</span>, () =&gt; {
      // Render a checkbox with label in the document
      const checkbox = TestUtils.renderIntoDocument(
        &lt;CheckboxWithLabel labelOn=<span class="hljs-string">&quot;On&quot;</span> labelOff=<span class="hljs-string">&quot;Off&quot;</span> /&gt;
      )

      const checkboxNode = ReactDOM.findDOMNode(checkbox)

      // Verify that it is Off by default
      expect(checkboxNode.textContent).toEqual(<span class="hljs-string">&apos;Off&apos;</span>)

      // Simulate a click and verify that it is now On
      TestUtils.Simulate.change(
        TestUtils.findRenderedDOMComponentWithTag(checkbox, <span class="hljs-string">&apos;input&apos;</span>)
      );
      expect(checkboxNode.textContent).toEqual(<span class="hljs-string">&apos;On&apos;</span>)
    });

  });
</code></pre>
<h5 id="act">Act</h5>
<p>In Act you can also do shallow and deep rendering, but we don&apos;t want to
emphasize this distiction. Simply think about unit and integration test and
you&apos;ll be good to go. Actually, Act doesn&apos;t care how you do integration tests,
you just open your page with your javascript and run your tests normally.</p>
<p>For unit tests, Act will behave as in React&apos;s shallow render mechanism, but
most of the time you don&apos;t really need to render things. This is because Act
uses plain JSON for defining components, and your functions simply return JSON.
Therefore, you can test a very simple component like this:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> simpleComponent = (name) =&gt; [<span class="hljs-string">&apos;h1&apos;</span>, <span class="hljs-string">`Hello <span class="hljs-subst">${name}</span>`</span>]

deepEqual(
  simpleComponent(<span class="hljs-string">&apos;Wittgenstein&apos;</span>),
  [<span class="hljs-string">&apos;h1&apos;</span>, <span class="hljs-string">&apos;Hello Wittgenstein&apos;</span>]
)
</code></pre>
<p>Since Act does more than just the view, you can test the other parts of your
app with the same simplicity. An initial model would be tested this way:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> initialModel = { notes: [] }

deepEqual(initialModel, { notes: [] })
</code></pre>
<p>And a reducer:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> reducer = (state, { type, payload }) =&gt; {
  <span class="hljs-keyword">switch</span> (type) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;add&apos;</span>:
      <span class="hljs-keyword">return</span> state + payload
    <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;sub&apos;</span>:
      <span class="hljs-keyword">return</span> state - payload
  }
  <span class="hljs-keyword">return</span> state
}

equal(reducer(<span class="hljs-number">0</span>, { type: <span class="hljs-string">&apos;add&apos;</span>, payload: <span class="hljs-number">10</span>}), <span class="hljs-number">10</span>, <span class="hljs-string">&apos;adds correctly&apos;</span>)

equal(reducer(<span class="hljs-number">0</span>, { type: <span class="hljs-string">&apos;sub&apos;</span>, payload: <span class="hljs-number">10</span>}), -<span class="hljs-number">10</span>, <span class="hljs-string">&apos;subtracts correctly&apos;</span>)

equal(reducer(<span class="hljs-number">0</span>, { type: <span class="hljs-string">&apos;mul&apos;</span>, payload: <span class="hljs-number">10</span>}), <span class="hljs-number">0</span>, <span class="hljs-string">&apos;does not multiply&apos;</span>)
</code></pre>
<p>Finally, if you have events (both simple events and signals) you get some
helpers (<code>toVDOM</code>, <code>click</code> and <code>keyup</code> are imported from <code>testHelpers</code>) to make
sure they will feed your reducer correctly.</p>
<p>A simple event example:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> button = [<span class="hljs-string">&apos;button&apos;</span>, {click: {someAction: <span class="hljs-number">10</span>}}]

assert.deepEqual(
  click(toVDOM(button())),
  {type: <span class="hljs-string">&apos;someAction&apos;</span>, payload: <span class="hljs-number">10</span>}
)
</code></pre>
<p>Signal example:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> input = [<span class="hljs-string">&apos;input&apos;</span>, {keyup: {someAction: valueOnEnter}}]

<span class="hljs-comment">// Non enter keyCode</span>
notOk(keyup(<span class="hljs-number">42</span>, <span class="hljs-string">&apos;Russell&apos;</span>, toVDOM(input)))

deepEqual(
  keyup(<span class="hljs-number">13</span>, <span class="hljs-string">&apos;Russell&apos;</span>, toVDOM(input)),
  {type: <span class="hljs-string">&apos;someAction&apos;</span>, payload: <span class="hljs-string">&apos;Russell&apos;</span>}
)
</code></pre>
<p>You can know more checking the unit_test folder under examples.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../docs/react/subscriptions.html" class="navigation navigation-prev " aria-label="Previous page: Subscriptions"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../docs/elm/index.html" class="navigation navigation-next " aria-label="Next page: For Elm developers"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
